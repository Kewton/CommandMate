# CommandMate Environment Configuration
# Copy this file to .env and fill in your values

# ===================================
# Server Configuration
# ===================================

# Root directory for worktree scanning and git clone
# This is the base directory that contains your git worktrees
# Cloned repositories will also be saved under this directory
CM_ROOT_DIR=/path/to/your/worktrees

# Server port (default: 3000)
CM_PORT=3000

# Bind address
# - 127.0.0.1: Localhost only (development)
# - 0.0.0.0: All interfaces (production, reverse proxy auth recommended)
CM_BIND=127.0.0.1

# ===================================
# Security / Authentication (Issue #331)
# ===================================

# Token authentication is enabled via CLI: commandmate start --auth
# The following variables are set automatically and should NOT be manually edited:
# CM_AUTH_TOKEN_HASH=<sha256-hash>  # Set automatically by --auth
# CM_AUTH_EXPIRE=24h                 # Token expiration (default: 24h, max: 30d)

# When CM_BIND=0.0.0.0, use a reverse proxy (e.g., Nginx) with authentication,
# or enable token auth with: commandmate start --auth
# See: docs/security-guide.md

# ===================================
# HTTPS / TLS (Issue #331)
# ===================================

# Enable HTTPS with TLS certificates:
#   commandmate start --auth --cert ./localhost.pem --key ./localhost-key.pem
#
# Quick setup with mkcert:
#   brew install mkcert && mkcert -install && mkcert localhost
#
# CM_HTTPS_CERT=./localhost.pem
# CM_HTTPS_KEY=./localhost-key.pem

# ===================================
# Database
# ===================================

# SQLite database file path
# - Global install: ~/.commandmate/data/cm.db (automatically set by commandmate init)
# - Local install: ./data/cm.db (relative to project root)
# Note: Usually you don't need to set this manually. commandmate init will set the appropriate absolute path.
# CM_DB_PATH=~/.commandmate/data/cm.db

# Legacy: DATABASE_PATH is deprecated and will be removed in v2.0.0
# Use CM_DB_PATH instead
# DATABASE_PATH=./data/db.sqlite

# ===================================
# Claude CLI Configuration
# ===================================

# Claude CLI executable path (optional)
# If set, CommandMate will use this path instead of searching via 'which claude'.
# The path must be absolute and point to an executable file.
# Security: Only alphanumeric characters, forward slashes, dots, underscores, and hyphens are allowed.
# Example: CLAUDE_PATH=/opt/homebrew/bin/claude
# CLAUDE_PATH=

# ===================================
# Logging
# ===================================

# Log level: debug | info | warn | error
# Development default: debug
# Production default: info
CM_LOG_LEVEL=debug

# Log output format: json | text
# json: Structured logs (production, log analysis tools)
# text: Human-readable format (development)
CM_LOG_FORMAT=text

# ===================================
# Legacy Environment Variables (Deprecated)
# The following MCBD_* variables are deprecated and will be removed in a future version.
# Use CM_* variables instead. Fallback is supported for backwards compatibility.
# ===================================
# MCBD_ROOT_DIR=/path/to/your/worktrees
# MCBD_PORT=3000
# MCBD_BIND=127.0.0.1
# MCBD_LOG_LEVEL=debug
# MCBD_LOG_FORMAT=text
